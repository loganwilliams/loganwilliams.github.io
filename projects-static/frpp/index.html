<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>What the United States Owns</title><meta property="og:type" content="website"><meta property="og:title" content="What the United States Owns"><meta property="og:description" content="Interactive map of Federal Real Property Profile (FRPP) buildings across the United States."><meta property="og:image" content="./image.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="What the United States Owns"><meta name="twitter:description" content="Interactive map of Federal Real Property Profile (FRPP) buildings across the United States."><meta name="twitter:image" content="./image.jpg"><link rel="preload" href="ArialNarrow.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="ArialNarrow-Bold.woff2" as="font" type="font/woff2" crossorigin><script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script><link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet"><script src="https://unpkg.com/pmtiles@3.2.0/dist/pmtiles.js"></script><script async src="https://plausible.io/js/pa-6YQ8-5DDpmSluNP4euXec.js"></script><script>window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}},plausible.init()</script><style>@font-face{font-family:'Arial Narrow';src:url('ArialNarrow.woff2') format('woff2'),url('ArialNarrow.woff') format('woff');font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:'Arial Narrow';src:url('ArialNarrow-Bold.woff2') format('woff2'),url('ArialNarrow-Bold.woff') format('woff');font-weight:700;font-style:normal;font-display:swap}body{margin:0;padding:0;background:#000;font-family:monospace}#map{width:100vw;height:100vh}.maplibregl-popup-content{background:rgba(0,0,0,.9)!important;color:#fff!important;padding:8px 12px!important;border-radius:4px!important;font-size:12px!important;font-family:Arial Narrow,sans-serif!important;box-shadow:0 2px 8px rgba(0,0,0,.5)!important;max-width:300px!important;text-transform:uppercase;border:1px solid rgba(255,255,255,.3)}.maplibregl-popup-content div.header{margin-bottom:4px;font-size:14px;color:#fff!important}.maplibregl-popup-content div{margin:2px 0;color:#fff!important}.maplibregl-popup-content hr{border:none;border-top:1px solid rgba(255,255,255,.4);margin:8px 0}.maplibregl-popup-tip{border-top-color:rgba(255,255,255,.4)!important}.maplibregl-popup{z-index:10!important}.legend{position:absolute;top:10px;left:10px;background:rgba(0,0,0,.8);color:#fff;padding:12px;border-radius:4px;font-size:14px;font-family:Arial Narrow,sans-serif;max-height:calc(100vh - 46px);max-width:260px;overflow-y:auto;overflow-x:hidden;box-shadow:0 2px 8px rgba(0,0,0,.5);z-index:1000;margin-right:10px;border:1px solid rgba(255,255,255,.4)}.legend h3{margin:0 0 8px 0;font-size:13px;font-weight:700}.legend-item{display:flex;align-items:flex-start;margin:4px 0;cursor:pointer;padding:2px 4px;border-radius:3px;transition:background-color .2s;align-items:center}.legend-item:hover{background-color:rgba(255,255,255,.1)}.legend-item.selected{background-color:rgba(255,255,255,.25);font-weight:700}.legend-item.dimmed{opacity:.4}.legend-color{width:16px;height:16px;border-radius:50%;margin-right:8px;border:1px solid rgba(255,255,255,.3);flex-shrink:0}.legend-label{line-height:1.4;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-width:0}.legend-item.has-children .legend-label::after{content:' ▸';opacity:.6}.legend-item.has-children.expanded .legend-label::after{content:' ▾'}.legend-bureaus{margin-left:24px;display:none}.legend-bureaus.expanded{display:block}.legend-bureau-item{font-size:12px}.legend-bureau-item .legend-color{width:12px;height:12px}.legal-interest-filters{margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,.2)}.legal-interest-filters select{font-size:14px;font-family:Arial Narrow,sans-serif;background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.3);border-radius:3px;padding:4px 8px;width:100%;cursor:pointer;text-transform:uppercase}.ownership-checkboxes{display:flex;gap:12px;font-size:12px;text-transform:uppercase}.ownership-checkbox{display:flex;align-items:center;gap:4px;cursor:pointer;color:#fff}.ownership-checkbox input[type=checkbox]{cursor:pointer;accent-color:rgba(255,255,255,0.8)}.filter-section-label{font-size:12px;text-transform:uppercase;margin-bottom:6px;color:rgba(255,255,255,.7)}.category-filter{margin-top:8px}.category-filter-label{font-size:12px;text-transform:uppercase;margin-bottom:6px;color:rgba(255,255,255,.7)}.category-filter-dropdowns{display:flex;gap:4px}.legal-interest-filters .category-select{flex:1;font-size:12px;font-family:Arial Narrow,sans-serif;background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.3);border-radius:3px;padding:4px 2px;cursor:pointer;text-transform:uppercase;min-width:0;width:auto}#cat-structure{flex:1.15}.category-select option:disabled{color:rgba(255,255,255,.4)}.category-filter-active{display:flex;align-items:center;justify-content:space-between;text-transform:uppercase;font-size:12px}.category-active-label{color:#fff}.category-show-all-btn,.year-show-all-btn{font-size:11px;font-family:Arial Narrow,sans-serif;background:rgba(255,255,255,.15);color:#fff;border:1px solid rgba(255,255,255,.4);border-radius:3px;padding:2px 8px;margin-left:4px;cursor:pointer;text-transform:uppercase}.category-show-all-btn:hover,.year-show-all-btn:hover{background:rgba(255,255,255,.25)}.year-histogram{margin-top:4px;padding-top:8px}.year-histogram-label{font-size:12px;margin-bottom:-14px;text-transform:uppercase;color:rgba(255,255,255,.7)}.year-histogram-container{position:relative;height:40px;display:flex;align-items:flex-end;gap:1px;cursor:pointer}.year-histogram-bar{flex:1;min-width:2px;background:rgba(255,255,255,.25);border-radius:1px 1px 0 0;transition:background .15s}.year-histogram-bar.selected{background:rgba(255,255,255,.6)}.year-histogram-track{position:relative;height:20px;margin-top:4px;margin-left:5px;margin-right:5px;background:rgba(255,255,255,.1);border-radius:3px;cursor:pointer;touch-action:none}.year-histogram-selection{position:absolute;top:0;height:100%;background:rgba(255,255,255,.3);border-radius:3px;pointer-events:none}.year-histogram-handle{position:absolute;top:0;width:10px;height:100%;background:rgba(255,255,255,.8);border-radius:2px;cursor:ew-resize;margin-left:-5px;touch-action:none}.year-histogram-handle:hover{background:#fff}.year-histogram-axis{display:flex;justify-content:space-between;font-size:12px;color:rgba(255,255,255,.5);margin-top:2px}.year-histogram-footer{display:none;align-items:center;justify-content:space-between;margin-top:8px;font-size:12px;color:#fff;text-transform:uppercase}.fullscreen-btn{position:absolute;top:10px;right:10px;z-index:1000;width:36px;height:36px;padding:0;background:rgba(0,0,0,.7);border:1px solid rgba(255,255,255,.3);border-radius:4px;color:#fff;cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center}.fullscreen-btn:hover{background:rgba(0,0,0,.85)}.expanded-marker{border-radius:50%;border:1px solid rgba(255,255,255,.5);box-sizing:border-box;cursor:pointer;opacity:.8;animation:expand-pop .25s ease-out;transition:transform .15s,opacity .15s}.expanded-marker:hover{transform:scale(1.3);z-index:10!important;opacity:1}@keyframes expand-pop{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}.expanded-marker-count{background:rgba(0,0,0,.85);color:#fff;padding:2px 8px;border-radius:10px;font-size:11px;font-family:Arial Narrow,sans-serif;white-space:nowrap;border:1px solid rgba(255,255,255,.3);animation:expand-pop .25s ease-out}@media (max-width:768px){.fullscreen-btn{display:none!important}.legend{display:flex;flex-wrap:wrap;flex-direction:row;gap:8px;overflow-y:visible;padding:8px;font-size:12px;max-height:50vh}.legal-interest-filters{flex:1 1 100%;min-width:140px}.legal-interest-filters select{font-size:12px}.year-histogram-label{font-size:12px}.year-histogram-axis,.year-histogram-footer{font-size:10px}.legend-item{display:inline-flex;align-items:center;margin:0;white-space:nowrap}.legend-color{width:12px;height:12px;margin-right:4px}.legal-interest-filters .category-select{font-size:11px;padding:3px 1px;padding-left:8px}.filter-section-label{font-size:11px}.category-filter-label{font-size:11px}.category-filter-active{font-size:11px}}</style></head><body><div id="map"></div><button type="button" class="fullscreen-btn" id="fullscreen-btn" title="Toggle fullscreen" aria-label="Toggle fullscreen">⛶</button><div class="legend" id="legend"><div class="filter-section-label">Filter by agency</div><div id="legend-agencies"></div><div class="legal-interest-filters"><div class="filter-section-label">Filter by ownership</div><div class="ownership-checkboxes" id="ownership-checkboxes"><label class="ownership-checkbox"><input type="checkbox" id="chk-owned" checked="checked"> Owned</label> <label class="ownership-checkbox"><input type="checkbox" id="chk-leased" checked="checked"> Leased</label></div><div class="category-filter" id="category-filter"><div class="category-filter-label" id="category-filter-label">Filter by property type</div><div class="category-filter-dropdowns" id="category-dropdowns"><select id="cat-building" class="category-select"><option value="" disabled="disabled" selected="selected" hidden>BUILDING</option><option value="Building|__all__">All Buildings</option><option value="Building|Administrative Office">Administrative Office</option><option value="Building|Aviation Security Related">Aviation Security Related</option><option value="Building|Border/Inspection Station">Border/Inspection Station</option><option value="Building|Child Care Center">Child Care Center</option><option value="Building|Communications Systems">Communications Systems</option><option value="Building|Comfort Station/Restrooms">Comfort Station/Restrooms</option><option value="Building|Courthouse">Courthouse</option><option value="Building|Data Centers">Data Centers</option><option value="Building|Dormitories/Barracks">Dormitories/Barracks</option><option value="Building|Family Housing">Family Housing</option><option value="Building|Facility Security">Facility Security</option><option value="Building|Hospital">Hospital</option><option value="Building|Industrial">Industrial</option><option value="Building|International Operations Facilities">Intl Operations Facilities</option><option value="Building|Laboratories">Laboratories</option><option value="Building|Land Port of Entry">Land Port of Entry</option><option value="Building|Mail Processing">Mail Processing</option><option value="Building|Museum">Museum</option><option value="Building|Navigation and Traffic Aids">Navigation and Traffic Aids</option><option value="Building|Network Facilities">Network Facilities</option><option value="Building|Non-Postal Facility">Non-Postal Facility</option><option value="Building|Office">Office</option><option value="Building|Other Customer Service">Other Customer Service</option><option value="Building|Other Institutional Uses">Other Institutional Uses</option><option value="Building|Outpatient Healthcare Facility">Outpatient Healthcare</option><option value="Building|Post Office">Post Office</option><option value="Building|Prisons and Detention Centers">Prisons and Detention</option><option value="Building|Public Facing Facility">Public Facing Facility</option><option value="Building|School">School</option><option value="Building|Service">Service</option><option value="Building|Storage Facility">Storage Facility</option><option value="Building|Training Facility">Training Facility</option><option value="Building|Vehicle Maintenance">Vehicle Maintenance</option><option value="Building|Warehouses">Warehouses</option><option value="Building|All Other">All Other</option></select> <select id="cat-structure" class="category-select"><option value="" disabled="disabled" selected="selected" hidden>STRUCTURE</option><option value="Structure|__all__">All Structures</option><option value="Structure|Airfield Pavements">Airfield Pavements</option><option value="Structure|Communications Systems">Communications Systems</option><option value="Structure|Flood Control and Navigation">Flood Control and Navigation</option><option value="Structure|Harbors and Ports">Harbors and Ports</option><option value="Structure|Industrial (other than buildings)">Industrial</option><option value="Structure|Miscellaneous Military Facilities">Misc Military Facilities</option><option value="Structure|Monuments and Memorials">Monuments and Memorials</option><option value="Structure|Museum">Museum</option><option value="Structure|Navigation and Traffic Aids (other than buildings)">Navigation and Traffic Aids</option><option value="Structure|Parking Structures">Parking Structures</option><option value="Structure|Power Development and Distribution">Power Dev and Distribution</option><option value="Structure|Railroads">Railroads</option><option value="Structure|Reclamation and Irrigation">Reclamation and Irrigation</option><option value="Structure|Recreational (other than buildings)">Recreational</option><option value="Structure|Renewable Energy System">Renewable Energy System</option><option value="Structure|Research and Development (other than Laboratories)">Research and Development</option><option value="Structure|Roads and Bridges">Roads and Bridges</option><option value="Structure|Service (other than buildings)">Service</option><option value="Structure|Space Exploration Structures">Space Exploration</option><option value="Structure|Storage (other than buildings)">Storage</option><option value="Structure|Utility Systems">Utility Systems</option><option value="Structure|Weapons Ranges">Weapons Ranges</option><option value="Structure|All Other">All Other</option></select> <select id="cat-land" class="category-select"><option value="" disabled="disabled" selected="selected" hidden>LAND</option><option value="Land|__all__">All Land</option><optgroup label="FRPP Land"><option value="Land|__frpp_only__">All FRPP Land</option><option value="Land|Agriculture">Agriculture</option><option value="Land|Airfields">Airfields</option><option value="Land|Communications Systems">Communications Systems</option><option value="Land|Flood Control and Navigation">Flood Control and Navigation</option><option value="Land|Forest and Wildlife">Forest and Wildlife</option><option value="Land|Grazing">Grazing</option><option value="Land|Harbor and Port">Harbor and Port</option><option value="Land|Housing">Housing</option><option value="Land|Industrial">Industrial</option><option value="Land|Institutional">Institutional</option><option value="Land|Navigation and Traffic Aids">Navigation and Traffic Aids</option><option value="Land|Office Building Locations">Office Building Locations</option><option value="Land|Outpatient Healthcare">Outpatient Healthcare</option><option value="Land|Parks and Historic Sites">Parks and Historic Sites</option><option value="Land|Power Development and Distribution">Power Dev and Distribution</option><option value="Land|Reclamation and Irrigation">Reclamation and Irrigation</option><option value="Land|Research and Development">Research and Development</option><option value="Land|Storage">Storage</option><option value="Land|Training Land">Training Land</option><option value="Land|Vacant">Vacant</option><option value="Land|All Other">All Other</option></optgroup><optgroup label="National Map Land"><option value="FedLand|__all__">All National Map Land</option><option value="FedLand|National Wildlife Refuge">National Wildlife Refuge</option><option value="FedLand|National Wilderness Area">National Wilderness Area</option><option value="FedLand|National Forest">National Forest</option><option value="FedLand|Indian Reservation">Indian Reservation</option><option value="FedLand|Waterfowl Production Area">Waterfowl Production Area</option><option value="FedLand|National Conservation Area">National Conservation Area</option><option value="FedLand|National Grassland">National Grassland</option><option value="FedLand|National Monument">National Monument</option><option value="FedLand|National Park">National Park</option><option value="FedLand|Military">Military</option><option value="FedLand|Wildlife Management Area">Wildlife Management Area</option><option value="FedLand|Research Natural Area">Research Natural Area</option><option value="FedLand|National Recreation Area">National Recreation Area</option><option value="FedLand|National Fish Hatchery">National Fish Hatchery</option><option value="FedLand|National Battlefield">National Battlefield</option><option value="FedLand|National Historic Park">National Historic Park</option><option value="FedLand|Public Domain Land">Public Domain Land</option><option value="FedLand|__other__">All Other</option></optgroup></select></div><div class="category-filter-active" id="category-active" style="display:none"><div class="category-active-label" id="category-active-label"></div><button type="button" id="category-show-all" class="category-show-all-btn">Show All Property Types</button></div></div><div class="year-histogram" id="year-histogram"><div class="year-histogram-label">Filter by build year</div><div class="year-histogram-container" id="year-histogram-bars" title="Click to select range"></div><div class="year-histogram-track" id="year-histogram-track" title="Drag handles to select range"><div class="year-histogram-selection" id="year-histogram-selection"></div><div class="year-histogram-handle" id="year-handle-min"></div><div class="year-histogram-handle" id="year-handle-max"></div></div><div class="year-histogram-axis"><span id="year-min-label">1700</span> <span id="year-max-label">2030</span></div><div class="year-histogram-footer" id="year-histogram-footer"><span id="year-undefined-count"></span> <button type="button" id="year-show-all-btn" class="year-show-all-btn">Show All Build Years</button></div></div></div></div><script>const e=new pmtiles.Protocol;maplibregl.addProtocol("pmtiles",e.tile);const t=["INDEPENDENT GOVERNMENT OFFICES","DEFENSE/WHS","UNITED STATES HOLOCAUST MEMORIAL MUSEUM","U.S. INTERNATIONAL DEVELOPMENT FINANCE CORPORATION","NATIONAL CREDIT UNION ADMINISTRATION","FEDERAL RETIREMENT THRIFT INVESTMENT BOARD","DC COURT SERVICES & OFFENDER SUPERVISION AGENCY","PEACE CORPS","PRETRIAL SERVICES FOR DC","REGIONAL COMMISSIONS","EXECUTIVE OFFICE OF THE PRESIDENT","MERIT SYSTEMS PROTECTION BOARD","ENVIRONMENTAL PROTECTION AGENCY"],n={DEFENSE:"#1584c0",AGRICULTURE:"#55cf5a",INTERIOR:"#FF9800","HOMELAND SECURITY":"#ff0000",STATE:"#9efff4",USPS:"#3a3a8c","GENERAL SERVICES ADMINISTRATION":"#ffb3c4","VETERANS AFFAIRS":"#d930d9",ENERGY:"#FFEAA7",COMMERCE:"#26A69A",TRANSPORTATION:"#673AB7","TENNESSEE VALLEY AUTHORITY":"#fcdf03","NATIONAL AERONAUTICS AND SPACE ADMINISTRATION":"#FF5722",JUSTICE:"#7B1FA2","HEALTH AND HUMAN SERVICES":"#00BCD4",LABOR:"#4CAF50",SMITHSONIAN:"#FFC107",OTHER:"#9E9E9E"};function i(e,t){const n=["case"];for(const i of t)n.push(["==",["get","agency"],i],e.OTHER);const i=["match",["get","agency"]];for(const[t,n]of Object.entries(e))"OTHER"!==t&&i.push(t,n);return i.push("#CCCCCC"),n.push(i),n}const r={"NATIONAL AERONAUTICS AND SPACE ADMINISTRATION":"NASA"},a={INTERIOR:{bureaus:["NATIONAL PARK SERVICE","FISH AND WILDLIFE SERVICE","BUREAU OF RECLAMATION","BUREAU OF LAND MANAGEMENT","BUREAU OF INDIAN AFFAIRS"],colors:{"NATIONAL PARK SERVICE":"#2CA02C","FISH AND WILDLIFE SERVICE":"#D62728","BUREAU OF RECLAMATION":"#1F77B4","BUREAU OF LAND MANAGEMENT":"#FF7F0E","BUREAU OF INDIAN AFFAIRS":"#9467BD",OTHER:"#8C564B"},abbreviations:{"NATIONAL PARK SERVICE":"NPS","FISH AND WILDLIFE SERVICE":"FWS","BUREAU OF RECLAMATION":"BOR","BUREAU OF LAND MANAGEMENT":"BLM","BUREAU OF INDIAN AFFAIRS":"BIA"}},AGRICULTURE:{bureaus:["FOREST SERVICE","AGRICULTURAL RESEARCH SERVICE","FARM SERVICE AGENCY","NATURAL RESOURCES CONSERVATION SERVICE"],colors:{"FOREST SERVICE":"#2CA02C","AGRICULTURAL RESEARCH SERVICE":"#FF7F0E","FARM SERVICE AGENCY":"#1F77B4","NATURAL RESOURCES CONSERVATION SERVICE":"#D62728",OTHER:"#9467BD"},abbreviations:{"FOREST SERVICE":"USFS","AGRICULTURAL RESEARCH SERVICE":"ARS","FARM SERVICE AGENCY":"FSA","NATURAL RESOURCES CONSERVATION SERVICE":"NRCS"}},"HOMELAND SECURITY":{bureaus:["U.S. COAST GUARD","CUSTOMS AND BORDER PROTECTION","FED LAW ENFORCEMENT TRAINING CTR (FLETC)"],colors:{"U.S. COAST GUARD":"#1F77B4","CUSTOMS AND BORDER PROTECTION":"#FF7F0E","FED LAW ENFORCEMENT TRAINING CTR (FLETC)":"#2CA02C",OTHER:"#D62728"},abbreviations:{"U.S. COAST GUARD":"USCG","CUSTOMS AND BORDER PROTECTION":"CBP","FED LAW ENFORCEMENT TRAINING CTR (FLETC)":"FLETC"}},DEFENSE:{bureaus:["AIR FORCE","ARMY","NAVY","CORPS OF ENGINEERS","DEFENSE/WHS"],colors:{"AIR FORCE":"#D62728",ARMY:"#2CA02C",NAVY:"#1F77B4","CORPS OF ENGINEERS":"#FF7F0E","DEFENSE/WHS":"#9467BD"},abbreviations:{"AIR FORCE":"USAF",ARMY:"USA",NAVY:"USN","CORPS OF ENGINEERS":"USACE"},displayNames:{"DEFENSE/WHS":"WASHINGTON HEADQUARTERS SERVICES"}},OTHER:{field:"agency",bureaus:["INDEPENDENT GOVERNMENT OFFICES","ENVIRONMENTAL PROTECTION AGENCY","UNITED STATES HOLOCAUST MEMORIAL MUSEUM","U.S. INTERNATIONAL DEVELOPMENT FINANCE CORPORATION","NATIONAL CREDIT UNION ADMINISTRATION","FEDERAL RETIREMENT THRIFT INVESTMENT BOARD","DC COURT SERVICES & OFFENDER SUPERVISION AGENCY","PEACE CORPS","PRETRIAL SERVICES FOR DC","REGIONAL COMMISSIONS","EXECUTIVE OFFICE OF THE PRESIDENT","MERIT SYSTEMS PROTECTION BOARD"],colors:{"INDEPENDENT GOVERNMENT OFFICES":"#D62728","ENVIRONMENTAL PROTECTION AGENCY":"#9467BD","UNITED STATES HOLOCAUST MEMORIAL MUSEUM":"#8C564B","U.S. INTERNATIONAL DEVELOPMENT FINANCE CORPORATION":"#E377C2","NATIONAL CREDIT UNION ADMINISTRATION":"#17BECF","FEDERAL RETIREMENT THRIFT INVESTMENT BOARD":"#BCBD22","DC COURT SERVICES & OFFENDER SUPERVISION AGENCY":"#FFBB78","PEACE CORPS":"#98DF8A","PRETRIAL SERVICES FOR DC":"#AEC7E8","REGIONAL COMMISSIONS":"#C5B0D5","EXECUTIVE OFFICE OF THE PRESIDENT":"#C49C94","MERIT SYSTEMS PROTECTION BOARD":"#F7B6D2",OTHER:"#9E9E9E"}}},o={FWS:{agency:"INTERIOR",bureau:"FISH AND WILDLIFE SERVICE"},FS:{agency:"AGRICULTURE",bureau:"FOREST SERVICE"},BLM:{agency:"INTERIOR",bureau:"BUREAU OF LAND MANAGEMENT"},NPS:{agency:"INTERIOR",bureau:"NATIONAL PARK SERVICE"},BIA:{agency:"INTERIOR",bureau:"BUREAU OF INDIAN AFFAIRS"},BOR:{agency:"INTERIOR",bureau:"BUREAU OF RECLAMATION"},DOD:{agency:"DEFENSE",bureau:"DEFENSE"},TVA:{agency:"TENNESSEE VALLEY AUTHORITY",bureau:"TENNESSEE VALLEY AUTHORITY"},DOE:{agency:"ENERGY",bureau:"ENERGY"},VA:{agency:"VETERANS AFFAIRS",bureau:"VETERANS AFFAIRS"},USDA:{agency:"AGRICULTURE",bureau:"AGRICULTURE"},NASA:{agency:"NATIONAL AERONAUTICS AND SPACE ADMINISTRATION",bureau:"NATIONAL AERONAUTICS AND SPACE ADMINISTRATION"},DOJ:{agency:"JUSTICE",bureau:"JUSTICE"},DOC:{agency:"COMMERCE",bureau:"COMMERCE"},MWAA:{agency:"TRANSPORTATION",bureau:"TRANSPORTATION"},DOT:{agency:"TRANSPORTATION",bureau:"TRANSPORTATION"},HHS:{agency:"HEALTH AND HUMAN SERVICES",bureau:"HEALTH AND HUMAN SERVICES"},GSA:{agency:"GENERAL SERVICES ADMINISTRATION",bureau:"GENERAL SERVICES ADMINISTRATION"},DOL:{agency:"LABOR",bureau:"LABOR"}},l={BIA:["Indian Reservation"],BLM:["Indian Reservation","National Conservation Area","National Monument","National Recreation Area","National Wilderness Area","Other","Public Domain Land"],BOR:["Lake","Land"],DOC:["Other"],DOD:["AF Guard","Air Force","Army","Army Guard","Coast Guard","Marine Corps","National Cemetery","Navy","Other"],DOE:["National Laboratory","Other","Test Site"],DOJ:["Other"],DOT:["Other"],FS:["National Forest","National Grassland","National Monument","National Recreation Area","National Scenic Area","National Wilderness Area","National Wildlife Refuge","Other","Research Natural Area","Wild and Scenic River"],FWS:["Coordinated Area","National Fish Hatchery","National Game Preserve","National Monument","National Natural Landmark","National Wilderness Area","National Wildlife Refuge","Research Natural Area","Waterfowl Production Area","Wildlife Management Area"],GSA:[],HHS:[],MWAA:["MWAA"],NASA:["Other"],NPS:["National Battlefield","National Historic Park","National Historic Reserve","National Historic Site","National Lakeshore","National Memorial","National Military Park","National Monument","National Park","National Parkway","National Preserve","National Recreation Area","National Reserve","National Seashore","National Wilderness Area","Other","Wild and Scenic River"],TVA:["Lake","Land"],USDA:["Other"],VA:["National Cemetery"],DOL:[]},u={AGRICULTURE:new Set(["Building|All Other","Building|Border/Inspection Station","Building|Child Care Center","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Dormitories/Barracks","Building|Family Housing","Building|Industrial","Building|Laboratories","Building|Office","Building|Other Institutional Uses","Building|School","Building|Service","Building|Warehouses","Land|Agriculture","Land|Airfields","Land|All Other","Land|Communications Systems","Land|Forest and Wildlife","Land|Grazing","Land|Housing","Land|Industrial","Land|Institutional","Land|Office Building Locations","Land|Parks and Historic Sites","Land|Research and Development","Land|Storage","Land|Training Land","Land|Vacant","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Industrial (other than buildings)","Structure|Monuments and Memorials","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Reclamation and Irrigation","Structure|Recreational (other than buildings)","Structure|Renewable Energy System","Structure|Research and Development (other than Laboratories)","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"]),COMMERCE:new Set(["Building|All Other","Building|Child Care Center","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Data Centers","Building|Facility Security","Building|Family Housing","Building|Industrial","Building|Laboratories","Building|Museum","Building|Office","Building|Other Institutional Uses","Building|Service","Building|Warehouses","Land|Airfields","Land|All Other","Land|Communications Systems","Land|Flood Control and Navigation","Land|Harbor and Port","Land|Housing","Land|Office Building Locations","Land|Research and Development","Land|Storage","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Harbors and Ports","Structure|Parking Structures","Structure|Research and Development (other than Laboratories)","Structure|Roads and Bridges","Structure|Storage (other than buildings)","Structure|Utility Systems"]),DEFENSE:new Set(["Aggregated|"]),ENERGY:new Set(["Building|All Other","Building|Child Care Center","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Data Centers","Building|Dormitories/Barracks","Building|Family Housing","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Museum","Building|Navigation and Traffic Aids","Building|Office","Building|Other Institutional Uses","Building|Outpatient Healthcare Facility","Building|Post Office","Building|School","Building|Service","Building|Warehouses","Land|Agriculture","Land|Airfields","Land|All Other","Land|Communications Systems","Land|Grazing","Land|Industrial","Land|Institutional","Land|Office Building Locations","Land|Parks and Historic Sites","Land|Power Development and Distribution","Land|Research and Development","Land|Storage","Land|Vacant","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Harbors and Ports","Structure|Industrial (other than buildings)","Structure|Monuments and Memorials","Structure|Navigation and Traffic Aids (other than buildings)","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Railroads","Structure|Reclamation and Irrigation","Structure|Recreational (other than buildings)","Structure|Research and Development (other than Laboratories)","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems","Structure|Weapons Ranges"]),"ENVIRONMENTAL PROTECTION AGENCY":new Set(["Building|All Other","Building|Child Care Center","Building|Communications Systems","Building|Laboratories","Building|Office","Building|Other Institutional Uses","Building|Service","Building|Warehouses","Land|Research and Development","Structure|All Other","Structure|Harbors and Ports","Structure|Parking Structures","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"]),"GENERAL SERVICES ADMINISTRATION":new Set(["Building|All Other","Building|Aviation Security Related","Building|Border/Inspection Station","Building|Child Care Center","Building|Communications Systems","Building|Courthouse","Building|Data Centers","Building|Dormitories/Barracks","Building|Facility Security","Building|Family Housing","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Land Port of Entry","Building|Museum","Building|Office","Building|Other Institutional Uses","Building|Outpatient Healthcare Facility","Building|Prisons and Detention Centers","Building|Public Facing Facility","Building|School","Building|Service","Building|Warehouses","Land|All Other","Land|Housing","Land|Office Building Locations","Land|Research and Development","Land|Vacant","Structure|All Other","Structure|Communications Systems","Structure|Harbors and Ports","Structure|Parking Structures","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"]),"HEALTH AND HUMAN SERVICES":new Set(["Building|All Other","Building|Border/Inspection Station","Building|Child Care Center","Building|Communications Systems","Building|Dormitories/Barracks","Building|Facility Security","Building|Family Housing","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Office","Building|Other Institutional Uses","Building|Outpatient Healthcare Facility","Building|Service","Building|Warehouses","Land|Housing","Land|Institutional","Land|Office Building Locations","Land|Research and Development","Structure|Airfield Pavements","Structure|All Other","Structure|Parking Structures","Structure|Research and Development (other than Laboratories)","Structure|Roads and Bridges","Structure|Storage (other than buildings)","Structure|Utility Systems"]),"HOMELAND SECURITY":new Set(["Building|All Other","Building|Aviation Security Related","Building|Border/Inspection Station","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Dormitories/Barracks","Building|Facility Security","Building|Family Housing","Building|Industrial","Building|Laboratories","Building|Land Port of Entry","Building|Navigation and Traffic Aids","Building|Office","Building|Other Institutional Uses","Building|Outpatient Healthcare Facility","Building|Post Office","Building|Prisons and Detention Centers","Building|Public Facing Facility","Building|School","Building|Service","Building|Warehouses","Land|Airfields","Land|All Other","Land|Communications Systems","Land|Forest and Wildlife","Land|Harbor and Port","Land|Housing","Land|Institutional","Land|Office Building Locations","Land|Research and Development","Land|Storage","Land|Training Land","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Harbors and Ports","Structure|Industrial (other than buildings)","Structure|Miscellaneous Military Facilities","Structure|Monuments and Memorials","Structure|Navigation and Traffic Aids (other than buildings)","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Recreational (other than buildings)","Structure|Renewable Energy System","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems","Structure|Weapons Ranges"]),INTERIOR:new Set(["Building|All Other","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Courthouse","Building|Dormitories/Barracks","Building|Facility Security","Building|Family Housing","Building|Industrial","Building|Laboratories","Building|Museum","Building|Navigation and Traffic Aids","Building|Office","Building|Other Institutional Uses","Building|Post Office","Building|Prisons and Detention Centers","Building|School","Building|Service","Building|Warehouses","Land|Agriculture","Land|Airfields","Land|All Other","Land|Communications Systems","Land|Flood Control and Navigation","Land|Forest and Wildlife","Land|Grazing","Land|Housing","Land|Industrial","Land|Institutional","Land|Office Building Locations","Land|Parks and Historic Sites","Land|Power Development and Distribution","Land|Reclamation and Irrigation","Land|Research and Development","Land|Storage","Land|Training Land","Land|Vacant","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Harbors and Ports","Structure|Industrial (other than buildings)","Structure|Monuments and Memorials","Structure|Navigation and Traffic Aids (other than buildings)","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Railroads","Structure|Reclamation and Irrigation","Structure|Recreational (other than buildings)","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"]),JUSTICE:new Set(["Building|All Other","Building|Child Care Center","Building|Communications Systems","Building|Data Centers","Building|Dormitories/Barracks","Building|Facility Security","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Office","Building|Other Institutional Uses","Building|Outpatient Healthcare Facility","Building|Prisons and Detention Centers","Building|School","Building|Service","Building|Training Facility","Building|Warehouses","Land|All Other","Land|Housing","Land|Industrial","Land|Institutional","Land|Office Building Locations","Structure|Parking Structures","Structure|Roads and Bridges","Structure|Utility Systems"]),LABOR:new Set(["Building|All Other","Building|Child Care Center","Building|Communications Systems","Building|Dormitories/Barracks","Building|Family Housing","Building|Industrial","Building|Laboratories","Building|Office","Building|Other Institutional Uses","Building|School","Building|Service","Building|Warehouses","Land|All Other","Land|Institutional","Structure|All Other","Structure|Recreational (other than buildings)","Structure|Renewable Energy System","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"]),"NATIONAL AERONAUTICS AND SPACE ADMINISTRATION":new Set(["Building|All Other","Building|Communications Systems","Building|Family Housing","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Office","Building|Other Institutional Uses","Building|Post Office","Building|School","Building|Service","Building|Warehouses","Land|Research and Development","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Harbors and Ports","Structure|Industrial (other than buildings)","Structure|Monuments and Memorials","Structure|Navigation and Traffic Aids (other than buildings)","Structure|Power Development and Distribution","Structure|Railroads","Structure|Recreational (other than buildings)","Structure|Research and Development (other than Laboratories)","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Space Exploration Structures","Structure|Storage (other than buildings)","Structure|Utility Systems","Structure|Weapons Ranges"]),"TENNESSEE VALLEY AUTHORITY":new Set(["Building|All Other","Building|Laboratories","Building|Office","Building|Service","Building|Warehouses","Land|All Other","Land|Communications Systems","Land|Power Development and Distribution","Land|Vacant","Structure|All Other"]),TRANSPORTATION:new Set(["Building|All Other","Building|Data Centers","Building|Dormitories/Barracks","Building|Family Housing","Building|Industrial","Building|Office","Building|Other Institutional Uses","Building|School","Building|Service","Building|Warehouses","Land|All Other","Land|Housing","Land|Industrial","Land|Navigation and Traffic Aids","Land|Office Building Locations","Land|Storage","Land|Vacant","Structure|All Other","Structure|Flood Control and Navigation","Structure|Monuments and Memorials","Structure|Navigation and Traffic Aids (other than buildings)","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Reclamation and Irrigation","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)"]),USPS:new Set(["Building|","Building|Administrative Office","Building|International Operations Facilities","Building|Mail Processing","Building|Network Facilities","Building|Non-Postal Facility","Building|Other Customer Service","Building|Post Office","Building|Storage Facility","Building|Training Facility","Building|Vehicle Maintenance"]),"VETERANS AFFAIRS":new Set(["Building|All Other","Building|Aviation Security Related","Building|Child Care Center","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Data Centers","Building|Dormitories/Barracks","Building|Facility Security","Building|Family Housing","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Museum","Building|Navigation and Traffic Aids","Building|Office","Building|Other Institutional Uses","Building|Outpatient Healthcare Facility","Building|Post Office","Building|Public Facing Facility","Building|School","Building|Service","Building|Warehouses","Land|All Other","Land|Housing","Land|Industrial","Land|Institutional","Land|Office Building Locations","Land|Outpatient Healthcare","Land|Parks and Historic Sites","Land|Research and Development","Land|Storage","Land|Vacant","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Industrial (other than buildings)","Structure|Monuments and Memorials","Structure|Navigation and Traffic Aids (other than buildings)","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Reclamation and Irrigation","Structure|Recreational (other than buildings)","Structure|Renewable Energy System","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"]),STATE:new Set(["Building|Office","Structure|Flood Control and Navigation"]),SMITHSONIAN:new Set(["Building|All Other","Building|Child Care Center","Building|Comfort Station/Restrooms","Building|Communications Systems","Building|Data Centers","Building|Dormitories/Barracks","Building|Facility Security","Building|Family Housing","Building|Hospital","Building|Industrial","Building|Laboratories","Building|Museum","Building|Office","Building|Other Institutional Uses","Building|School","Building|Service","Building|Warehouses","Land|All Other","Land|Forest and Wildlife","Land|Institutional","Land|Research and Development","Land|Storage","Structure|Airfield Pavements","Structure|All Other","Structure|Communications Systems","Structure|Flood Control and Navigation","Structure|Harbors and Ports","Structure|Museum","Structure|Parking Structures","Structure|Power Development and Distribution","Structure|Reclamation and Irrigation","Structure|Recreational (other than buildings)","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Space Exploration Structures","Structure|Storage (other than buildings)","Structure|Utility Systems"]),"INDEPENDENT GOVERNMENT OFFICES":new Set(["Building|All Other","Building|Child Care Center","Building|Comfort Station/Restrooms","Building|Dormitories/Barracks","Building|Family Housing","Building|Museum","Building|Office","Building|Other Institutional Uses","Building|Public Facing Facility","Building|School","Building|Service","Building|Warehouses","Land|All Other","Land|Forest and Wildlife","Land|Parks and Historic Sites","Structure|All Other","Structure|Parking Structures","Structure|Recreational (other than buildings)","Structure|Roads and Bridges","Structure|Service (other than buildings)","Structure|Storage (other than buildings)","Structure|Utility Systems"])},s={AGRICULTURE:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,2,2,0,1,3,4,9,1,3,0,2,4,5,17,11,26,10,80,64,212,120,347,654,3570,2266,820,1026,1770,3465,4133,2167,3183,2405,2702,2847,2889,1875,1668,662,507,0],undef:7118},COMMERCE:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,0,0,1,6,13,10,9,18,20,25,20,20,16,20,83,51,40,54,7,17,0],undef:1056},DEFENSE:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],undef:1895},ENERGY:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,19,4,12,3,11,10,12,161,583,1131,1865,1187,1451,812,1349,1822,2542,1977,1476,1325,1631,765,1018,0],undef:1201},"ENVIRONMENTAL PROTECTION AGENCY":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,6,0,0,7,5,2,0,0,6,19,10,24,5,36,10,32,20,7,7,0,0],undef:66},"GENERAL SERVICES ADMINISTRATION":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,2,3,5,0,4,3,10,6,7,4,163,17,51,37,17,19,128,86,84,19,43,56,125,116,73,41,64,114,153,64,136,80,58,0],undef:7446},"HEALTH AND HUMAN SERVICES":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,2,0,5,2,4,6,43,98,31,38,83,317,346,112,230,119,160,222,152,402,171,17,31,0],undef:320},"HOMELAND SECURITY":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,3,0,0,1,0,2,12,3,5,17,1,11,18,22,7,20,11,35,25,33,15,27,25,53,65,58,46,223,275,299,397,743,731,1538,4476,6728,3878,4793,870,772,0],undef:1486},"INDEPENDENT GOVERNMENT OFFICES":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,17,1,0,0,8,1,17,19,5,81,48,47,5,57,102,18,35,80,9,72,38,3,0,5,0,4,2,10,3,0,0],undef:9},INTERIOR:{bins:[20,3,7,3,7,18,6,12,14,32,18,17,23,30,59,34,35,35,109,18,60,91,83,288,303,194,150,291,136,351,334,176,389,230,427,309,1989,1483,1285,2371,1855,3255,8378,7686,2602,4574,6165,10156,12799,8152,11249,7266,8635,8468,11343,7334,6871,2780,1894,0],undef:32452},JUSTICE:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,17,6,2,10,51,177,100,154,117,53,250,108,85,261,219,544,791,683,534,191,5,0,0],undef:226},LABOR:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,3,8,4,9,14,21,21,76,146,81,183,52,297,108,289,204,310,355,613,588,628,561,383,0],undef:435},"NATIONAL AERONAUTICS AND SPACE ADMINISTRATION":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,40,40,312,100,273,366,942,197,221,297,447,340,320,337,368,328,169,0],undef:104},SMITHSONIAN:{bins:[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,2,0,0,0,2,0,2,7,11,34,2,9,14,33,6,10,31,43,65,15,33,32,28,47,31,49,50,40,48,0],undef:83},STATE:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,2,2,0,1,3,0,2,0,0,1,2,1,1,2,0],undef:36},"TENNESSEE VALLEY AUTHORITY":{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],undef:3593},TRANSPORTATION:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,32,23,44,152,99,83,169,99,146,296,404,571,289,222,625,0],undef:5801},USPS:{bins:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,0,3,5,7,114,147,44,54,745,934,18,16,72,406,648,363,1269,771,1692,987,1571,119,90,38,41,3],undef:472},"VETERANS AFFAIRS":{bins:[0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,0,1,3,7,2,23,15,76,24,64,65,102,148,73,97,314,332,519,377,545,504,269,171,148,151,358,372,468,499,505,354,1158,557,533,0],undef:3717}};function d(e,n){if(!e){const e=new Set;for(const t of Object.values(u))for(const n of t)e.add(n);return e}if("OTHER"===e){const e=new Set;for(const n of t)if(u[n])for(const t of u[n])e.add(t);return e}return u[e]||new Set}function c(e){if(!e){const e=Array(W).fill(0);let t=0;for(const n of Object.values(s)){for(let t=0;t<W;t++)e[t]+=n.bins[t];t+=n.undef}return{bins:e,undef:t}}if("OTHER"===e){const e=Array(W).fill(0);let n=0;for(const i of t){const t=s[i];if(t){for(let n=0;n<W;n++)e[n]+=t.bins[n];n+=t.undef}}return{bins:e,undef:n}}return s[e]||{bins:Array(W).fill(0),undef:0}}function g(){const e=["match",["get","ADMIN1"]];for(const[t,i]of Object.entries(o)){const r=n[i.agency]||"#9E9E9E";e.push(t,r)}e.push("#9E9E9E");return["case",["all",["==",["get","ADMIN1"],"DOD"],["==",["get","FEATURE1"],"Coast Guard"]],n["HOMELAND SECURITY"],e]}function E(e){const t=a[e];if("DEFENSE"===e){const e=["match",["get","FEATURE1"],["Army","Army Guard"],t.colors.ARMY,["Air Force","AF Guard"],t.colors["AIR FORCE"],["Navy","Marine Corps"],t.colors.NAVY,"Coast Guard",n["HOMELAND SECURITY"],t.colors["DEFENSE/WHS"]||"#9467BD"],i=["match",["get","ADMIN1"]];for(const[e,t]of Object.entries(o))"DOD"!==e&&i.push(e,n[t.agency]||"#9E9E9E");return i.push("#9E9E9E"),["case",["==",["get","ADMIN1"],"DOD"],e,i]}if("HOMELAND SECURITY"===e){const i=["match",["get","ADMIN1"]];for(const[r,a]of Object.entries(o))if("DOD"!==r)if(a.agency===e&&t){const e=t.colors[a.bureau]||t.colors.OTHER||"#9E9E9E";i.push(r,e)}else{const e=n[a.agency]||"#9E9E9E";i.push(r,e)}i.push("#9E9E9E");return["case",["all",["==",["get","ADMIN1"],"DOD"],["==",["get","FEATURE1"],"Coast Guard"]],t.colors["U.S. COAST GUARD"]||n["HOMELAND SECURITY"],i]}const i=["match",["get","ADMIN1"]];for(const[r,a]of Object.entries(o))if(a.agency===e&&t){const e=t.colors[a.bureau]||t.colors.OTHER||"#9E9E9E";i.push(r,e)}else{const e=n[a.agency]||"#9E9E9E";i.push(r,e)}return i.push("#9E9E9E"),i}function S(e){const t=a[e],n=["match",["get",t.field||"bureau"]];for(const e of t.bureaus)n.push(e,t.colors[e]);return n.push(t.colors.OTHER||"#9E9E9E"),n}let A=null,m=null,h=null,f="";function N(e){const t=a[e];return Object.entries(t.colors).map(([n,i])=>{const r=t.displayNames?.[n]||n;return`\n                        <div class="legend-item legend-bureau-item" data-agency="${e}" data-bureau="${n}">\n                            <div class="legend-color" style="background-color: ${i};"></div>\n                            <div class="legend-label">${r}</div>\n                        </div>\n                    `}).join("")}function R(){const e=document.getElementById("legend-agencies"),t=Object.entries(n).map(([e,t])=>{const n=a[e],i=h===e;let o=`\n                        <div class="legend-item${n?" has-children":""}${i?" expanded":""}" data-agency="${e}">\n                            <div class="legend-color" style="background-color: ${t};"></div>\n                            <div class="legend-label">${r[e]||e}</div>\n                        </div>\n                    `;return n&&(o+=`<div class="legend-bureaus${i?" expanded":""}" data-parent="${e}">`,o+=N(e),o+="</div>"),o}).join("");e.innerHTML=t}R();const I=new maplibregl.Map({container:"map",style:{version:8,sources:{cartodb:{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"],tileSize:256,attribution:"© CARTO"},frpp:{type:"vector",url:"pmtiles://https://data-lake-house.fra1.cdn.digitaloceanspaces.com/frpp_usps.pmtiles",attribution:"FRPP Data"},"federal-land":{type:"vector",url:"pmtiles://https://data-lake-house.fra1.cdn.digitaloceanspaces.com/federal_indian.pmtiles"}},layers:[{id:"cartodb-layer",type:"raster",source:"cartodb"},{id:"federal-land-fill",type:"fill",source:"federal-land","source-layer":"federal_indian",paint:{"fill-color":g(),"fill-opacity":.25}},{id:"frpp-points",type:"circle",source:"frpp","source-layer":"merged_with_usps",paint:{"circle-color":i(n,t),"circle-radius":["interpolate",["exponential",2],["zoom"],1,["*",.125,["interpolate",["linear"],["sqrt",["coalesce",["get","sqft"],0]],0,4,1e3,20]],3,["*",.25,["interpolate",["linear"],["sqrt",["coalesce",["get","sqft"],0]],0,4,1e3,20]],5,["interpolate",["linear"],["sqrt",["coalesce",["get","sqft"],0]],0,4,1e3,20],13,["interpolate",["linear"],["sqrt",["coalesce",["get","sqft"],0]],0,4,1e3,20],20,["*",64,["interpolate",["linear"],["sqrt",["coalesce",["get","sqft"],0]],0,4,1e3,20]]],"circle-stroke-width":["interpolate",["linear"],["zoom"],2,0,10,1],"circle-stroke-color":"rgba(255, 255, 255, 0.5)","circle-opacity":.8}}],glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"},bounds:[[-127.9,23.3],[-60,50.6]],maxZoom:17,fitBoundsOptions:window.innerWidth<=768?{offset:[0,70]}:{offset:[120,0]}}),O=new maplibregl.Popup({closeButton:!1,closeOnClick:!1,className:"map-popup"});function B(e){const t=(e.bureau||"").replace(".",""),n=e.agency||"",i=t&&n&&t.toUpperCase()===n.toUpperCase();let r='<div class="header"><strong>';e.name?(r+=e.name+"</strong></div>",r+="<div>"+(i?"<strong>"+t+"</strong>":"<strong>"+t+"</strong>, "+n)+"</div>"):(r+=t+"</strong></div>",i||(r+="<div>"+n+"</div>"));const a=e.type||"",o=e.use||"";(a||o)&&(r+='<div style="font-style: italic;">'+[a,o].filter(Boolean).join(" / "));const l=parseInt(e.year,10);return r+=l&&l>0&&9999!==l?" ("+l+")</div>":"</div>",r}function y(e){const t=e.ADMIN1||"",n=o[t]||{agency:t,bureau:t},i=e.GNIS_Name1||"",r="N/A"===i?"":i,a=e.FEATURE1||"";let l=n.bureau,u=n.agency,s=a;"DOD"===t&&"Coast Guard"===a?(u="HOMELAND SECURITY",l="U. S. Coast Guard",s="Military"):"DOD"===t&&a&&(l=a.toUpperCase(),s="Military");const d=u===l;let c='<div class="header"><strong>';return r?(c+=r+"</strong></div>",c+="<div>"+(d?"<strong>"+l+"</strong>":"<strong>"+l+"</strong>, "+u)+"</div>"):(c+=l+"</strong></div>",d||(c+="<div>"+u+"</div>")),c+='<div style="font-style: italic;">Land'+(s?" / "+s:"")+"</div>",c}I.on("mousemove","federal-land-fill",e=>{if(T&&L){const t=I.project(L),n=e.point.x-t.x,i=e.point.y-t.y;if(Math.sqrt(n*n+i*i)<p+10)return}if(!(I.queryRenderedFeatures(e.point,{layers:["frpp-points"]}).length>0)&&e.features.length>0){const t=y(e.features[0].properties);O.setLngLat(e.lngLat).setHTML(t).addTo(I)}}),I.on("mouseleave","federal-land-fill",()=>{O.remove()}),I.on("mousemove","frpp-points",e=>{if(e.features.length>0){if(T&&L){const t=I.project(L),n=e.point.x-t.x,i=e.point.y-t.y;if(Math.sqrt(n*n+i*i)<p+10)return}const t=5,n=e.features.slice(0,t).map(e=>B(e.properties)),i=e.features.length-t,r=n.join("<hr>")+(i>0?'<hr><div style="font-style: italic; opacity: 0.8;">… and '+i+" more</div>":"");O.setLngLat(e.lngLat).setHTML(r).addTo(I)}}),I.on("mouseleave","frpp-points",()=>{O.remove()}),I.on("mouseenter","frpp-points",()=>{I.getCanvas().style.cursor="pointer"}),I.on("mouseleave","frpp-points",()=>{I.getCanvas().style.cursor=""});let C=[],T=!1,L=null,p=0;function D(){C.forEach(e=>e.remove()),C=[],T=!1,L=null,p=0,O.remove()}function b(e){if(h&&a[h]){const t=a[h],n=e[t.field||"bureau"]||"OTHER";return t.colors[n]||t.colors.OTHER||"#9E9E9E"}return t.includes(e.agency)?n.OTHER:n[e.agency]||"#CCCCCC"}function F(e,t){const n=4+Math.sqrt(e||0)/1e3*16;function i(e,t,n,i,r){return i+(Math.pow(2,e-t)-1)/(Math.pow(2,n-t)-1)*(r-i)}let r;return r=t<=1?.125:t<=3?i(t,1,3,.125,.25):t<=5?i(t,3,5,.25,1):t<=13?1:t<=20?i(t,13,20,1,64):64,Math.max(n*r,3)}function M(){document.querySelectorAll(".legend-item").forEach(e=>{const t=e.dataset.agency,n=e.dataset.bureau,i=e.classList.contains("legend-bureau-item");e.classList.remove("selected","dimmed"),m?i&&t===A&&n===m?e.classList.add("selected"):i&&t===A||(i||t!==A?e.classList.add("dimmed"):e.classList.add("selected")):A&&(i?t!==A&&e.classList.add("dimmed"):t===A?e.classList.add("selected"):e.classList.add("dimmed"))})}I.on("click","frpp-points",e=>{if(!e.features||0===e.features.length)return;if(I.getZoom()<7)return;D(),O.remove();const t=[[e.point.x-5,e.point.y-5],[e.point.x+5,e.point.y+5]];let n=I.queryRenderedFeatures(t,{layers:["frpp-points"]});const i=new Set,r=[];for(const e of n){const t=e.geometry.coordinates,n=Math.round(1e5*t[0])+","+Math.round(1e5*t[1]);i.has(n)||(i.add(n),r.push(t))}let a=[...n];for(const e of r){const t=I.project(e),n=[[t.x-1,t.y-1],[t.x+1,t.y+1]],i=I.queryRenderedFeatures(n,{layers:["frpp-points"]});a.push(...i)}const o=new Set,l=a.filter(e=>{const t=e.properties,n=[t.agency,t.bureau,t.name,t.sqft,t.year,t.type,t.use,t.interest].join("|");return!o.has(n)&&(o.add(n),!0)});if(l.length<=1)return void O.setLngLat(e.lngLat).setHTML(B(l[0].properties)).addTo(I);const u=[e.lngLat.lng,e.lngLat.lat];T=!0,L=u;const s=I.getZoom(),d=l.length,c=(I.getPixelRatio?I.getPixelRatio():window.devicePixelRatio,l.map(e=>F(e.properties.sqft||0,s))),g=Math.max(...c,4),E=Math.PI*(3-Math.sqrt(5)),S=[...c].sort((e,t)=>e-t),A=(2*S[Math.floor(S.length/2)]+4)/Math.sqrt(Math.PI),m=[];for(let e=0;e<d;e++){const t=e*E,n=A*Math.sqrt(e+1);m.push({x:n*Math.cos(t),y:n*Math.sin(t)})}const h="http://www.w3.org/2000/svg",f=A*Math.sqrt(d+1)+g+6;p=f;const N=Math.ceil(2*f+4),R=N/2,y=document.createElementNS(h,"svg");y.setAttribute("width",N),y.setAttribute("height",N),y.style.pointerEvents="none";const M=document.createElementNS(h,"circle");M.setAttribute("cx",R),M.setAttribute("cy",R),M.setAttribute("r",f),M.setAttribute("fill","rgba(0,0,0,0.45)"),M.setAttribute("stroke","rgba(255,255,255,0.12)"),M.setAttribute("stroke-width","1"),y.appendChild(M);const v=document.createElementNS(h,"circle");v.setAttribute("cx",R),v.setAttribute("cy",R),v.setAttribute("r",3),v.setAttribute("fill","rgba(255,255,255,0.5)"),y.appendChild(v);const U=document.createElement("div");U.style.width=N+"px",U.style.height=N+"px",U.style.pointerEvents="none",U.appendChild(y);const P=new maplibregl.Marker({element:U,anchor:"center"}).setLngLat(u).addTo(I);C.push(P);const H=Array.from({length:d},(e,t)=>t);H.sort((e,t)=>c[t]-c[e]);for(const e of H){const t=l[e],{x:n,y:i}=m[e],r=c[e],a=Math.round(2*r),o=document.createElement("div");o.className="expanded-marker",o.style.backgroundColor=b(t.properties),o.style.width=a+"px",o.style.height=a+"px";const s=new maplibregl.Marker({element:o,anchor:"center",offset:[n,i]}).setLngLat(u).addTo(I),d=B(t.properties),g=(e,t)=>{const n=I.unproject([e,t]);O.setLngLat(n).setHTML(d).addTo(I)};o.addEventListener("mousemove",e=>g(e.clientX,e.clientY)),o.addEventListener("mouseleave",()=>O.remove()),o.addEventListener("touchstart",e=>{e.preventDefault();const t=e.touches[0];g(t.clientX,t.clientY)},{passive:!1}),C.push(s)}}),I.on("click",e=>{if(!T)return;if(e.originalEvent?.target?.closest?.(".expanded-marker"))return;const t=I.project(L),n=e.point.x-t.x,i=e.point.y-t.y;if(Math.sqrt(n*n+i*i)<=p+10)return;0===I.queryRenderedFeatures(e.point,{layers:["frpp-points"]}).length&&D()}),I.on("zoomstart",()=>{T&&D()});const v=i(n,t);function U(){const e=document.getElementById("chk-owned")?.checked??!0,t=document.getElementById("chk-leased")?.checked??!0;return e&&t?"both":e?"owned":t?"leased":"both"}function P(){const e=U();return"both"===e?null:"owned"===e?["!=",["coalesce",["get","interest"],""],"L"]:"leased"===e?["==",["get","interest"],"L"]:null}function H(){const e=f;if(!e)return null;if(e.startsWith("FedLand|"))return["==",["get","agency"],"__none__"];const[t,n]=e.split("|");if("__undefined__"===e)return["all",["==",["coalesce",["get","type"],""],""],["==",["coalesce",["get","use"],""],""]];if(t&&void 0!==n){const e=["==",["coalesce",["get","type"],""],t];if("__all__"===n||"__frpp_only__"===n||"Aggregated"===t)return e;return["all",e,["==",["coalesce",["get","use"],""],n]]}return null}const _=["National Wildlife Refuge","National Wilderness Area","National Forest","Indian Reservation","Waterfowl Production Area","National Conservation Area","National Grassland","National Monument","National Park","Wildlife Management Area","Research Natural Area","National Recreation Area","National Fish Hatchery","National Battlefield","National Historic Park","Public Domain Land"],V=["Army","Air Force","Navy","Marine Corps","Army Guard","Coast Guard"];function k(){const e=f;if(!e.startsWith("FedLand|"))return null;const t=e.substring(8);if("__all__"===t)return null;if("Military"===t)return["match",["get","FEATURE1"],V,!0,!1];if("__other__"===t){return["match",["get","FEATURE1"],[..._,...V],!1,!0]}return["==",["get","FEATURE1"],t]}const w=1700,G=2030,W=60;let x=[],Y=0,q=w,j=G,z=null,$=null;function X(){if(q===w&&j===G)return null;q==w&&(q=1400);const e=["coalesce",["to-number",["get","year"]],0];return["all",["all",["!=",e,0],["!=",e,9999]],[">=",e,q],["<=",e,j]]}function J(e){return e=Math.max(0,Math.min(1,e)),Math.round(w+330*e)}function K(e){return(e-w)/330}function Z(){document.getElementById("year-histogram-track");const e=document.getElementById("year-histogram-selection"),t=document.getElementById("year-handle-min"),n=document.getElementById("year-handle-max");let i=K(q),r=K(j);i=Math.max(0,Math.min(1,i)),r=Math.max(0,Math.min(1,r)),i>r&&([i,r]=[r,i]);const a=100*i+"%",o=100*(r-i)+"%";e.style.left=a,e.style.width=o,t.style.left=a,n.style.left=100*r+"%",document.getElementById("year-min-label").textContent=q,document.getElementById("year-max-label").textContent=j,x.forEach((e,t)=>{const n=w+330*(t+.5)/W,i=document.getElementById("year-bar-"+t);i&&i.classList.toggle("selected",n>=q&&n<=j)});const l=document.getElementById("year-histogram-footer"),u=document.getElementById("year-undefined-count");(q!==w||j!==G)&&Y>0?(l.style.display="flex",u.textContent=Y.toLocaleString()+" properties missing build year data"):l.style.display="none"}function Q(){const e=["cat-building","cat-structure","cat-land"].map(e=>document.getElementById(e));if(e.some(e=>!e))return;const t=d(A,m),n=U();let i=new Set;if("leased"!==n){let e=Object.keys(l);if(A)if("OTHER"===A)e=[];else{const t=new Set;for(const[e,n]of Object.entries(o))n.agency===A&&t.add(e);if(m){const n=new Set;for(const[e,t]of Object.entries(o))t.bureau===m&&n.add(e);"DEFENSE"===A&&le[m]?(e=[],le[m].forEach(e=>i.add(e))):"HOMELAND SECURITY"===A&&"U.S. COAST GUARD"===m?(e=[],i.add("Coast Guard")):e=n.size>0?[...n]:[...t]}else e=[...t],"HOMELAND SECURITY"===A&&i.add("Coast Guard")}if(!("DEFENSE"===A&&m&&le[m]||"HOMELAND SECURITY"===A&&"U.S. COAST GUARD"===m))for(const t of e)l[t]&&l[t].forEach(e=>{"Coast Guard"===e&&"DEFENSE"===A||i.add(e)})}const r=new Set([..._,...V]),a=[...i].some(e=>!r.has(e)),u=V.some(e=>i.has(e)),s={};for(const e of t){const t=e.split("|")[0];t&&(s[t]=!0)}i.size>0&&(s.Land=!0);let c=!1;e.forEach(e=>{e.querySelectorAll("option[value]").forEach(e=>{const n=e.value;if(n)if(n.startsWith("FedLand|")){const t=n.substring(8);let r;r="__all__"===t?i.size>0:"Military"===t?u:"__other__"===t?a:i.has(t),e.disabled=!r,r||n!==f||(c=!0)}else if("Land|__frpp_only__"===n){const i=[...t].some(e=>e.startsWith("Land|"));e.disabled=!i,i||n!==f||(c=!0)}else if(n.endsWith("|__all__")){const t=n.split("|")[0],i=!!s[t];e.disabled=!i,i||n!==f||(c=!0)}else{const i=t.has(n);e.disabled=!i,i||n!==f||(c=!0)}else e.disabled=!1})}),c&&f&&(Se(),ie(),ce())}function ee(){const e=document.getElementById("year-histogram"),t=f&&(f.startsWith("Land|")||f.startsWith("FedLand|")),n="DEFENSE"===A||"TENNESSEE VALLEY AUTHORITY"===A||"STATE"===A||t;n&&(q=w,j=G,Z()),e&&(e.style.display=n?"none":"block")}function te(e){if(!e.length)return e;let n=e;if(A)if(m){const e=a[A];n="agency"===e?.field?n.filter(e=>(e.properties?.agency||"")===m):n.filter(e=>(e.properties?.agency||"")===A&&(e.properties?.bureau||"OTHER")===m)}else if("OTHER"===A){const e=new Set(t);n=n.filter(t=>e.has(t.properties?.agency||""))}else n=n.filter(e=>(e.properties?.agency||"")===A);const i=U();"both"!==i&&(n=n.filter(e=>{const t=e.properties?.interest||"";return"owned"===i?"L"!==t:"leased"!==i||"L"===t}));const r=f;if(r){if(r.startsWith("FedLand|"))return[];const[e,t]=r.split("|");"__undefined__"===r?n=n.filter(e=>""===(e.properties?.type||"")&&""===(e.properties?.use||"")):e&&void 0!==t&&(n="__all__"===t||"__frpp_only__"===t||"Aggregated"===e?n.filter(t=>(t.properties?.type||"")===e):n.filter(n=>(n.properties?.type||"")===e&&(n.properties?.use||"")===t))}return n}function ne(){const e=Array(W).fill(0);let t=0;try{const n=I.querySourceFeatures("frpp",{sourceLayer:"merged_with_usps"}),i=I.getBounds(),r=te(n.filter(e=>{const t=e.geometry?.coordinates;return!(!t||t.length<2)&&i.contains(t)})),a=330/W;r.forEach(n=>{const i=parseInt(n.properties?.year,10);if(isNaN(i)||0===i||9999===i)t++;else if(i>=w&&i<=G){const t=Math.min(W-1,Math.floor((i-w)/a));e[t]++}})}catch(e){}return{bins:e,undef:t}}function ie(){ee();const e=f&&(f.startsWith("Land|")||f.startsWith("FedLand|"));if("DEFENSE"===A||"TENNESSEE VALLEY AUTHORITY"===A||"STATE"===A||e)return;if(z)return;const t=ne();x=t.bins.slice(),Y=t.undef;const n=document.getElementById("year-histogram");n&&(n.style.display="block"),re()}function re(){const e=document.getElementById("year-histogram-bars"),t=Math.max(1,...x);e.innerHTML=x.map((e,n)=>`<div class="year-histogram-bar" id="year-bar-${n}" style="height: ${e/t*100}%"></div>`).join("")||Array(W).fill(0).map((e,t)=>`<div class="year-histogram-bar" id="year-bar-${t}" style="height: 5%"></div>`).join(""),Z()}function ae(){const e=document.getElementById("year-histogram-track");Q(),ie();const t=e=>{if(e.target.classList.contains("year-histogram-handle"))return;const t=e.currentTarget.getBoundingClientRect(),n=J((e.clientX-t.left)/t.width);n<(q+j)/2?q=Math.min(n,j-1):j=Math.max(n,q+1),Z(),ce()},n=()=>{const e=z;z=null,e&&ce()},i=document.getElementById("year-handle-min"),r=document.getElementById("year-handle-max"),a=document.getElementById("year-histogram-bars");e.addEventListener("click",t),a.addEventListener("click",t);const o=e=>{e.preventDefault(),z="min"},l=e=>{e.preventDefault(),z="max"};i.addEventListener("mousedown",o),r.addEventListener("mousedown",l),i.addEventListener("touchstart",o,{passive:!1}),r.addEventListener("touchstart",l,{passive:!1}),document.addEventListener("mouseup",n),document.addEventListener("touchend",n),document.addEventListener("touchcancel",n);const u=t=>{z&&(t.preventDefault(),(t=>{const n=e.getBoundingClientRect();if(n.width<=0)return;const i=((e=>e.touches?e.touches[0].clientX:e.clientX)(t)-n.left)/n.width,r=J(i);"min"===z?(q=Math.min(r,j-1),q=Math.max(w,q)):"max"===z&&(j=Math.max(r,q+1),j=Math.min(G,j)),$||($=requestAnimationFrame(()=>{$=null,Z()}))})(t))};document.addEventListener("mousemove",u),document.addEventListener("touchmove",u,{passive:!1}),document.getElementById("year-show-all-btn").addEventListener("click",()=>{q=w,j=G,Z(),ce()}),I.on("moveend",()=>ie());const s=()=>{I.off("idle",s),ie()};I.on("idle",s)}function oe(){if(!A)return null;if(m){const e=a[A];return"agency"===e?.field?["==",["get","agency"],m]:["all",["==",["get","agency"],A],["==",["get","bureau"],m]]}if("OTHER"===A){const e=["any"];for(const n of t)e.push(["==",["get","agency"],n]);return e}return["==",["get","agency"],A]}const le={"AIR FORCE":["Air Force","AF Guard"],ARMY:["Army","Army Guard"],NAVY:["Navy","Marine Corps"]},ue=["all",["==",["get","ADMIN1"],"DOD"],["==",["get","FEATURE1"],"Coast Guard"]],se=["all",["==",["get","ADMIN1"],"DOD"],["!=",["get","FEATURE1"],"Coast Guard"]];function de(){if(!A)return null;const e=[];for(const[t,n]of Object.entries(o))n.agency===A&&e.push(t);if("HOMELAND SECURITY"===A){if("U.S. COAST GUARD"===m)return ue;if(m){const e=[];for(const[t,n]of Object.entries(o))n.bureau===m&&e.push(t);return e.length>0?1===e.length?["==",["get","ADMIN1"],e[0]]:["match",["get","ADMIN1"],e,!0,!1]:["==",["get","ADMIN1"],"__none__"]}return e.length>0?["any",ue,1===e.length?["==",["get","ADMIN1"],e[0]]:["match",["get","ADMIN1"],e,!0,!1]]:ue}if(m){if("DEFENSE"===A){const e=le[m];return e?["all",["==",["get","ADMIN1"],"DOD"],["!=",["get","FEATURE1"],"Coast Guard"],["match",["get","FEATURE1"],e,!0,!1]]:se}const t=[];for(const[e,n]of Object.entries(o))n.bureau===m&&t.push(e);return t.length>0?1===t.length?["==",["get","ADMIN1"],t[0]]:["match",["get","ADMIN1"],t,!0,!1]:e.length>0?1===e.length?["==",["get","ADMIN1"],e[0]]:["match",["get","ADMIN1"],e,!0,!1]:["==",["get","ADMIN1"],"__none__"]}return"DEFENSE"===A?se:"OTHER"===A||0===e.length?["==",["get","ADMIN1"],"__none__"]:1===e.length?["==",["get","ADMIN1"],e[0]]:["match",["get","ADMIN1"],e,!0,!1]}function ce(){const e=P(),t=H(),n=X(),i=[e,t,n,oe()].filter(Boolean),r=0===i.length?null:1===i.length?i[0]:["all",...i];I.setFilter("frpp-points",r);const a=U(),o=f,l=o.startsWith("FedLand|");if("leased"===a||o&&!(l||"Land|__all__"===o)||!!n)I.setLayoutProperty("federal-land-fill","visibility","none");else{I.setLayoutProperty("federal-land-fill","visibility","visible"),I.setPaintProperty("federal-land-fill","fill-opacity",l?.7:.25);const e=[de(),k()].filter(Boolean),t=0===e.length?null:1===e.length?e[0]:["all",...e];I.setFilter("federal-land-fill",t)}}function ge(){A=null,m=null,h=null,ce(),I.setPaintProperty("frpp-points","circle-color",v),I.setPaintProperty("federal-land-fill","fill-color",g()),R(),Q(),ie()}function Ee(e,t,n){f=e;const i=document.getElementById("category-dropdowns"),r=document.getElementById("category-active"),a=document.getElementById("category-active-label");if(e){i.style.display="none",r.style.display="flex";let o=t;(e.endsWith("|__all__")||e.endsWith("|__frpp_only__"))&&t.startsWith("All ")&&(o=t.slice(4)),a.textContent=e.endsWith("|__all__")||e.endsWith("|__frpp_only__")?"Showing only "+o:"Showing only "+t+" ("+n+")"}else i.style.display="flex",r.style.display="none",document.getElementById("cat-building").value="",document.getElementById("cat-structure").value="",document.getElementById("cat-land").value="",["cat-building","cat-structure","cat-land"].forEach(e=>{document.getElementById(e).querySelectorAll("option[value]").forEach(e=>{e.value&&(e.disabled=!1)})})}function Se(){Ee("","","")}function Ae(e,t){const n=e.value;if(!n)return Se(),Q(),ie(),void ce();Ee(n,e.options[e.selectedIndex].text,t),["cat-building","cat-structure","cat-land"].forEach(t=>{const n=document.getElementById(t);n!==e&&(n.value="")}),Q(),ie(),ce()}function me(e){A!==e||a[e]?(A=e,m=null,a[e]?(h===e?(A=null,m=null,h=null,I.setPaintProperty("frpp-points","circle-color",v),I.setPaintProperty("federal-land-fill","fill-color",g())):(h=e,I.setPaintProperty("frpp-points","circle-color",S(e)),I.setPaintProperty("federal-land-fill","fill-color",E(e))),R()):(I.setPaintProperty("frpp-points","circle-color",v),I.setPaintProperty("federal-land-fill","fill-color",g()),h&&(h=null,R())),Q(),ie(),ce(),M()):ge()}function he(e,t){A===e&&m===t?(m=null,Q(),ie(),ce(),M()):(A=e,m=t,h&&h===e||(h=e,I.setPaintProperty("frpp-points","circle-color",S(e)),I.setPaintProperty("federal-land-fill","fill-color",E(e)),R()),Q(),ie(),ce(),M())}document.getElementById("legend").addEventListener("click",e=>{const t=e.target.closest(".legend-item");if(t){const e=t.dataset.agency,n=t.dataset.bureau;n?he(e,n):e&&me(e)}}),document.getElementById("chk-owned").addEventListener("change",()=>{document.getElementById("chk-owned").checked||document.getElementById("chk-leased").checked||(document.getElementById("chk-owned").checked=!0),ie(),ce(),Q()}),document.getElementById("chk-leased").addEventListener("change",()=>{document.getElementById("chk-owned").checked||document.getElementById("chk-leased").checked||(document.getElementById("chk-leased").checked=!0),ie(),ce(),Q()}),document.getElementById("cat-building").addEventListener("change",function(){Ae(this,"Building")}),document.getElementById("cat-structure").addEventListener("change",function(){Ae(this,"Structure")}),document.getElementById("cat-land").addEventListener("change",function(){Ae(this,"Land")}),document.getElementById("category-show-all").addEventListener("click",function(){Se(),ie(),ce(),Q()}),document.getElementById("fullscreen-btn").addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}),document.addEventListener("fullscreenchange",()=>{const e=document.getElementById("fullscreen-btn");e.textContent=document.fullscreenElement?"✕":"⛶",e.title=document.fullscreenElement?"Exit fullscreen":"Toggle fullscreen",I.resize()}),I.on("load",()=>{ae()})</script></body></html>