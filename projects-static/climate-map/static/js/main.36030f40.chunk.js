(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,,function(e){e.exports=["1380","2358","2661","3815","3897","4672","4954","5054","5073","5074","5085","5088","5344","5351","5666","5746","5750","5840","7428","8032","8245","8252","8313","12727","14083","15485","15553","15674","15685","15763","16234","16663","16681","16856","16864","17738","17833","17882","18012","18341","18601","18611","18813","18820","18827","18927","19369","19421","19478","19516","19980","20138","20140","21528","21560","22507","22626","22746","22924","22957","23001","23178","23184","23404","23521","23939","24215","24218","24327","24463","24533","24624","24739","24829","24842","24855","24895","24943","24985","25231","25421","25441","25544","25612","25665","25667","25685","25691","25866","25909","25966","25986","26162","26210","26289","26302","26463","26531","26544","26667","26671","26838","26886","27202","27256","27342","27506","27570","27584","27706","27877","28038","28362","28368","28378","28710","28755","28758","28765","28784","29132","29430","29589","29656","29677","29822","29846","30414","30447","30539","30598","30638","30639","30671","30724","31319","31333","32013","32138","32182","32183","32185","32215","32335","32337","32357","32360","32422","32654","32662","32706","32775","34250","35471","36065","36501","36515","37152","37316","37684","38157","38378","38609","38649","38669","38739","38874","38880","38959","39098","39107","39109","39148","39151","39161","39436","39704","40355","40488","40730","40803","40930","41310","41364","41386","41426","41549","41651","41736","41778","42131","42287","42403","42444","42457","42742","42759","43018","43350","43618","43791","43909","43981","44322","44619","44860","45114","45408","45427","45712","45713","45837","46102","46513","46921","47019","47021","47139","47174","47392","47430","47445","47545","47647","47856","47986","48620","48830","49281","49761","49792","49964","50040","50059","50110","50137","50145","50152","50241","50269","50552","50592","50623","50631","50649","50706","51045","51452","51502","52036","52056","52071","52075","52562","52568","52631","52652","53148","53176","53940","53962","54152","54215","54240","54543","54640","54834","54976","54978","55010","55796","55988","57737","58236","58255","58310","58313","59921","60037","60967","61233","61758","62857","62993","63850","63938","63963","65036","65532","65675","65701","66077","66759","67102","68330","70521","70540","71002","71009","71066","71218","71330","71415","71434","72043","72053","72075","72105","72133","72180","72369","72387","72475","72525","72711","72820","72829","73022","73031","73435","73488","73561","73668","73802","74335","74440","74444","74461","74545","74721","74737","74866","74947","75121","75434","75444","75485","75564","75636","75680","75782","76246","76468","77333","77463","77582","77866","77870","77882","78074","78347","78364","78547","78658","78960","79002","79223","79320","79383","79405","79740","79776","80430","80474","80866","81127","81153","82218","82310","82717","83853","84510","85219","85220","85221","85222","85223","85228","85230","85231","85232","85235","85236","85237","85239","85241","85242","85245","85247","85272","85273","85292","85329","85639","86430","87060","88036","88213","89024","89028","89803","89824","92317","92318","92323","93282","95221","95419","95424","95480","95481","95613","95676","95913","95972","97143","97425","97427","98025","98539","99608","99635","99675","99687","99697","99725","99850","99950"]},function(e,t,a){e.exports=a(38)},,,,,,function(e,t,a){},,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(8),i=a.n(r),s=(a(23),a(10)),c=a(2),l=a(3),m=a(5),u=a(4),p=a(6),d=a(9),v=a(7),h={tco2:{id:"Total Household Carbon Footprint (tCO2e/yr)",min:0,max:75,name:"Per household carbon footprint (tCO2e/yr)",shortname:"carbon footprint",units:"tCO2e/yr"},housing:{id:"Housing (tCO2e/yr)",min:3.84,max:25,name:"Housing carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (housing)",units:"tCO2e/yr"},transport:{id:"Transport (tCO2e/yr)",min:2.76,max:30,name:"Transport carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (transportation)",units:"tCO2e/yr"},food:{id:"Food (tCO2e/yr)",min:3,max:12,name:"Food carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (food)",units:"tCO2e/yr"},goods:{id:"Goods (tCO2e/yr)",min:2.5,max:10,name:"Goods carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (goods)",units:"tCO2e/yr"},services:{id:"Services (tCO2e/yr)",min:2.5,max:12,name:"Services carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (services)",units:"tCO2e/yr"},vmt:{id:"Vehicle miles traveled",min:3271,max:4e4,name:"Vehicle miles traveled (miles/year)",units:"miles/yr"},income:{id:"IncomePerHousehold",min:2500,max:13e4,name:"Income per household",units:"$",shortname:"annual income"},homevalue:{id:"AverageHouseValue",min:2e4,max:8e5,name:"Average house value",base:2,units:"$",shortname:"home value"},popden:{id:"popden",min:0,max:3e4,name:"Population density (pop/sq. mi.)",base:5,shortname:"population density",units:"pop/sq. mile."},population:{id:"Population",shortname:"population",min:0,max:8e4},tco2_income:{id:"Total Household Carbon Footprint (tCO2e/yr)",min:20,max:50,base:1,incomeCoefficient:.000352623921726188,units:"tCO2e/yr"},housing_income:{id:"Housing (tCO2e/yr)",min:4,max:21,name:"Housing carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (housing)",units:"tCO2e/yr",incomeCoefficient:44792617074884626e-21},transport_income:{id:"Transport (tCO2e/yr)",min:2.1,max:20.2,name:"Transport carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (transportation)",units:"tCO2e/yr",incomeCoefficient:.0001457372116613509},food_income:{id:"Food (tCO2e/yr)",min:4.8,max:9.9,name:"Food carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (food)",units:"tCO2e/yr",incomeCoefficient:985661998935793e-20},goods_income:{id:"Goods (tCO2e/yr)",min:2.1,max:2.8,name:"Goods carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (goods)",units:"tCO2e/yr",incomeCoefficient:6549999094902087e-20},services_income:{id:"Services (tCO2e/yr)",min:2,max:2.25,name:"Services carbon footprint, per household (tCO2e/yr)",shortname:"carbon footprint (services)",units:"tCO2e/yr",incomeCoefficient:867393135956937e-19}},f=["similar","lower","higher"],y=[["income","homevalue"],["population","popden"],["tco2","housing","transport","food","goods","services"]],C=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(m.a)(this,Object(u.a)(t).call(this,e));var n=Object(v.c)({accessToken:"pk.eyJ1IjoibG9nYW53IiwiYSI6ImNqNTFscTg3ZTA1M3Myd3A5ZnoxMXQ1eHkifQ.rD4GwekG5CArTiMkIuv-gA"});return a.state={map:n,zoom:[9]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props.layers?h[this.props.layers.value]:h.tco2,a=this.state.map,n=t.min,r=t.max;e="_income"===this.props.layers.value.slice(this.props.layers.value.length-7)?["-",["get",t.id],["*",["get","IncomePerHousehold"],t.incomeCoefficient]]:["get",t.id],"capita"===this.props.layers.norm&&(e=["/",e,["get","PersonsPerHousehold"]],n/=2.65,r/=2.65);var i=r-n,s=t.base||1;return o.a.createElement(a,{style:"mapbox://styles/loganw/cjw2lyxv406gz1cmrmlsm5j3m",center:this.props.center,zoom:this.state.zoom,maxZoom:14,minZoom:3,key:"mainMap"},o.a.createElement(v.b,{id:"climate",key:"climate",geoJsonSource:{type:"vector",url:"mapbox://loganw.6l0uhilq"}}),o.a.createElement(v.a,{key:"data-layer-climate",id:"data-fill-climate",sourceId:"climate",type:"fill",sourceLayer:"joined2",filter:["has",t.id],paint:{"fill-color":["interpolate",["linear"],e,Math.pow(0,s)*i+n,"#440154",Math.pow(.25,s)*i+n,"#3b528b",Math.pow(.5,s)*i+n,"#21918c",Math.pow(.75,s)*i+n,"#5ec962",Math.pow(1,s)*i+n,"#fde725"],"fill-opacity":.8,"fill-outline-color":"rgba(1,1,1,0)"},before:"hillshade_highlight_bright",onClick:this.props.onClick,onMouseMove:this.props.onMouseMove}),o.a.createElement(v.a,{key:"data-line-climate",id:"data-line-climate",sourceId:"climate",type:"line",sourceLayer:"joined2",filter:["==",["get","GEOID10"],this.props.selected],paint:{"line-color":"black","line-width":2,"line-opacity":.8}}))}}]),t}(n.Component),E=(a(32),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.zip,a=e.value,n=e.norm,r="capita"===n?t[h[a].id]/t.PersonsPerHousehold:t[h[a].id],i="capita"===n?h[a].min/2.65:h[a].min,s=(r-i)/(("capita"===n?h[a].max/2.65:h[a].max)-i);return o.a.createElement("div",{className:"value"+(s>.5?" black":" white"),style:{backgroundColor:d.b(s)}},Math.round(r))}}]),t}(n.Component)),b=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.zip,a=e.norm;return o.a.createElement("div",{className:"components"},o.a.createElement("div",{className:"component",title:"Housing"},o.a.createElement("div",{className:"title"},"H"),o.a.createElement(E,{value:"housing",zip:t,norm:a})),o.a.createElement("div",{className:"component",title:"Transportation"},o.a.createElement("div",{className:"title"},"T"),o.a.createElement(E,{value:"transport",zip:t,norm:a})),o.a.createElement("div",{className:"component",title:"Food"},o.a.createElement("div",{className:"title"},"F"),o.a.createElement(E,{value:"food",zip:t,norm:a})),o.a.createElement("div",{className:"component",title:"Goods"},o.a.createElement("div",{className:"title"},"G"),o.a.createElement(E,{value:"goods",zip:t,norm:a})),o.a.createElement("div",{className:"component",title:"Services"},o.a.createElement("div",{className:"title"},"S"),o.a.createElement(E,{value:"services",zip:t,norm:a})))}}]),t}(n.Component);function O(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var g=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.zip,a=e.preview,n=this.props.norm||"household";return o.a.createElement("div",{className:"zip"+(a?" preview":""),onClick:this.props.onClick},o.a.createElement("div",{className:"img"},o.a.createElement("img",{src:"https://zip-code-ims.s3-us-west-2.amazonaws.com/".concat(t.GEOID10?t.GEOID10:t.ZipCode,".jpg"),alt:""})),o.a.createElement("div",{className:"stats"},o.a.createElement("div",{className:"name"},t.City+", "+t.State+" "+(t.GEOID10?t.GEOID10:t.ZipCode)),o.a.createElement("div",{className:"desc"},"$"+O(t[h[this.props.stats[0]].id])+" / "+O(Math.round(t[h[this.props.stats[1]].id])),"popden"===this.props.stats[1]?o.a.createElement("span",null,"/mi",o.a.createElement("sup",null,"2")):null),o.a.createElement("div",{className:"total"},o.a.createElement(E,{zip:t,value:"tco2",norm:n})),o.a.createElement(b,{zip:t,norm:n})))}}]),t}(n.Component),N=(a(33),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"onChange",value:function(e,t,a){var n=JSON.parse(JSON.stringify(this.props.comparison));n[a][e]=t,this.props.onChange(n)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"Controls"},o.a.createElement("div",{className:"info"},"Compare ZIP Codes with"),[0,1,2].map(function(t){return o.a.createElement("div",{className:"row",key:"row "+t},o.a.createElement("select",{onChange:function(a){return e.onChange("dir",a.nativeEvent.target.value,t)},defaultValue:e.props.comparison[t].dir},f.map(function(e){return o.a.createElement("option",{key:e,value:e},e)})),o.a.createElement("select",{onChange:function(a){return e.onChange("value",a.nativeEvent.target.value,t)},defaultValue:e.props.comparison[t].value},y[t].map(function(e){return o.a.createElement("option",{key:e,value:e},h[e].shortname)})),2!==t?o.a.createElement("div",{className:"and"},"and"):null)}))}}]),t}(n.Component)),k=(a(34),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.layers?h[this.props.layers.value]:h.tco2,t=e.min,a=e.max-e.min;"capita"===this.props.layers.norm&&(t/=2.65,a/=2.65);var n=e.base||1,r=e.units||"",i=1;return e.max<10&&(i=10),o.a.createElement("div",{id:"legend"},o.a.createElement("div",{className:"bar"}),o.a.createElement("div",{className:"labels"},o.a.createElement("div",{id:"min"},Math.round(t*i)/i),o.a.createElement("div",{id:"mid"},("$"===r?"$":"")+Math.round((Math.pow(.5,n)*a+t)*i)/i+("$"===r?"":" "+r)),o.a.createElement("div",{id:"max"},Math.round((t+a)*i)/i)))}}]),t}(n.Component)),j=(a(35),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,a=e.mapLayer;return o.a.createElement("div",{className:"LayerControl"},o.a.createElement("div",{id:"info"},o.a.createElement("p",null,"An attempt to dig deeper into the interrelation of land use, wealth, and greenhouse gas emissions."),o.a.createElement("div",{id:"me"},o.a.createElement("a",{href:"http://subject.space"},"Logan Williams")),o.a.createElement("p",null,"Data and the hard work by the"," ",o.a.createElement("a",{href:"https://coolclimate.berkeley.edu/"},"CoolClimate Network")," ","at UC Berkeley.")),o.a.createElement(k,{layers:this.props.mapLayer}),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"tco2"===a.value?"active":"",onClick:function(){return t({value:"tco2"})}},"Total CO",o.a.createElement("sub",null,"2")," footprint")),o.a.createElement("div",{className:"subcomponents"},o.a.createElement("div",{className:"label"},"Footprint components"),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"housing"===a.value?"active":"",onClick:function(){return t({value:"housing"})}},"Housing"),o.a.createElement("div",{className:"transport"===a.value?"active":"",onClick:function(){return t({value:"transport"})}},"Transportation")),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"food"===a.value?"active":"",onClick:function(){return t({value:"food"})}},"Food"),o.a.createElement("div",{className:"goods"===a.value?"active":"",onClick:function(){return t({value:"goods"})}},"Goods"),o.a.createElement("div",{className:"services"===a.value?"active":"",onClick:function(){return t({value:"services"})}},"Services")),o.a.createElement("div",{className:"subcomponents"},o.a.createElement("div",{className:"label"},"Controlled for income"),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"tco2_income"===a.value?"active":"",onClick:function(){return t({value:"tco2_income"})}},"Total CO",o.a.createElement("sub",null,"2")," footprint"))),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"housing_income"===a.value?"active":"",onClick:function(){return t({value:"housing_income"})}},"Housing"),o.a.createElement("div",{className:"transport_income"===a.value?"active":"",onClick:function(){return t({value:"transport_income"})}},"Transportation")),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"food_income"===a.value?"active":"",onClick:function(){return t({value:"food_income"})}},"Food"),o.a.createElement("div",{className:"goods_income"===a.value?"active":"",onClick:function(){return t({value:"goods_income"})}},"Goods"),o.a.createElement("div",{className:"services_income"===a.value?"active":"",onClick:function(){return t({value:"services_income"})}},"Services"))),o.a.createElement("div",{className:"subcomponents"},o.a.createElement("div",{className:"label"},"Census statistics"),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"income"===a.value?"active":"",onClick:function(){return t({value:"income"})}},"Income"),o.a.createElement("div",{className:"popden"===a.value?"active":"",onClick:function(){return t({value:"popden"})}},"Population density")),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"vmt"===a.value?"active":"",onClick:function(){return t({value:"vmt"})}},"Yearly driving"),o.a.createElement("div",{className:"homevalue"===a.value?"active":"",onClick:function(){return t({value:"homevalue"})}},"Home value")),o.a.createElement("div",{className:"subcomponents"},o.a.createElement("div",{className:"label"},"Normalization"),o.a.createElement("div",{className:"normalization"},o.a.createElement("div",{className:"household"===a.norm?"active":"",onClick:function(){return t({norm:"household"})}},"per household"),o.a.createElement("div",{className:"capita"===a.norm?"active":"",onClick:function(){return t({norm:"capita"})}},"per capita")))))}}]),t}(n.Component)),w=(a(36),a(37),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"sortValues",value:function(e){var t=this;return this.props.zipcodes.filter(function(a){return e.reduce(function(e,n){var o="capita"===t.props.mapLayer.norm?n.target/n.PersonsPerHousehold:n.target,r="capita"===t.props.mapLayer.norm?a[n.value]/a.PersonsPerHousehold:a[n.value];return e&&(!n.tolerance||r>o*n.tolerance&&r<o*(1/n.tolerance))},!0)}).map(function(a){return Object(s.a)({score:Math.sqrt(e.reduce(function(e,n){var o="capita"===t.props.mapLayer.norm?n.target/n.PersonsPerHousehold:n.target,r="capita"===t.props.mapLayer.norm?a[n.value]/a.PersonsPerHousehold:a[n.value];return(n.weight||1)*Math.pow(r-o,2)+e},0))},a)}).sort(function(e,t){return e.score-t.score}).slice(1,10)}},{key:"render",value:function(){var e=this,t=this.props.comparison.map(function(t){var a=1;return"higher"===t.dir&&(a=1/1.5),"lower"===t.dir&&(a=1.5),{value:h[t.value].id,target:e.props.targetZip[h[t.value].id]/a,PersonsPerHousehold:e.props.targetZip.PersonsPerHousehold,tolerance:.8,weight:100/Math.sqrt(h[t.value].max-h[t.value].min)}}),a=this.sortValues(t);return o.a.createElement("div",{className:"ComparisonZips"},a.map(function(t){return o.a.createElement(g,{key:t.ZipCode,zip:t,onClick:function(){e.props.onClick(t)},norm:e.props.mapLayer.norm,stats:[e.props.comparison[0].value,e.props.comparison[1].value]})}))}}]),t}(n.Component)),z=a(16),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).state={zipcodes:[],targetIncome:12e3,hovered:null,selected:null,center:[-74,40.7],mapLayer:{norm:"household",value:"tco2"},comparison:[{value:"income",dir:"similar"},{value:"population",dir:"similar"},{value:"tco2",dir:"similar"}]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a("/jones-kammen.csv").then(function(t){t=t.filter(function(e){return e.ZipCode&&z.indexOf(e.ZipCode)<0}),e.setState({zipcodes:t,selected:t.filter(function(e){return"11379"===e.ZipCode})[0]})})}},{key:"select",value:function(e){this.setState({selected:e.features[0].properties,center:[e.features[0].properties.Longitude,e.features[0].properties.Latitude]})}},{key:"hover",value:function(e){this.setState({hovered:e.features[0].properties})}},{key:"onChange",value:function(e){this.setState({mapLayer:Object(s.a)({},this.state.mapLayer,e)})}},{key:"setComparison",value:function(e){this.setState({comparison:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement(C,{onClick:this.select.bind(this),center:this.state.center,selected:this.state.selected?this.state.selected.GEOID10?this.state.selected.GEOID10:this.state.selected.ZipCode:"",layers:this.state.mapLayer}),this.state.selected?o.a.createElement("div",{className:"right"},o.a.createElement("div",{className:"preview"},o.a.createElement(g,{preview:!0,zip:this.state.selected,norm:this.state.mapLayer.norm,stats:[this.state.comparison[0].value,this.state.comparison[1].value]})),o.a.createElement(N,{comparison:this.state.comparison,onChange:this.setComparison.bind(this)}),o.a.createElement(w,{zipcodes:this.state.zipcodes,targetZip:this.state.selected,onClick:function(t){e.select({features:[{properties:t}]})},comparison:this.state.comparison,mapLayer:this.state.mapLayer})):null,o.a.createElement(j,{onChange:this.onChange.bind(this),mapLayer:this.state.mapLayer}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[17,1,2]]]);
//# sourceMappingURL=main.36030f40.chunk.js.map